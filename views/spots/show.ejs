<% layout('layouts/boilerplate') %>

<section class="show-section">
  <div class="show-main">
    <div class="show-background">
      <div class="show-overlay"></div>
    </div>
    <div class="show-card">
      <%- include('../partials/flash') %>
      <div class="show-text">
        <h1><%= spot.title %></h1>
        <h2><%= spot.location %></h2>
        <h3><%= spot.description %></h3>
      </div>
      <div class="show-image">
        <img src="<%= spot.image %>" alt="" />
        <!-- <p>Created by:</p> -->
      </div>
      <div class="show-buttons">
        <a href="/spots">Back to All</a>
        <a href="/spots/<%= spot._id %>/edit">Edit Spot</a>
        <div class="show-delete-form">
          <form action="/spots/<%= spot._id %>?_method=DELETE" method="POST">
            <button class="show-delete-button">Delete Spot</button>
          </form>
        </div>
      </div>
    </div>
    <div class="show-card-2">
      <div class="review-list">
        <% for(let review of spot.reviews) { %>

        <div class="review-list-group">
          <p class="reviews-list-rating">Rating: <%= review.rating %></p>
          <p class="reviews-list-review"><%= review.body %></p>
          <p class="reviews-list-userName">Added By:</p>
          <form
            action="/spots/<%= spot._id %>/reviews/<%= review._id %>?_method=DELETE"
            method="POST"
          >
            <button class="review-delete-button">Delete Review</button>
          </form>
        </div>

        <% } %>
      </div>
    </div>
  </div>
  <div class="show-card-3">
    <div class="form-container-review">
      <div class="review-heading-text">
        <h1>Have you skated this spot?</h1>
        <h2>Please leave a review below:</h2>
      </div>
      <form
        action="/spots/<%= spot._id %>/reviews"
        method="POST"
        class="review-form"
        id="review-form"
      >
        <div class="review-form-main form-control-review">
          <label for="body">Review:</label>
          <textarea
            name="review[body]"
            id="body"
            cols="30"
            rows="10"
            class="review-form-textarea"
          ></textarea>
          <i class="fas fa-check-circle"></i>
          <i class="fas fa-exclamation-circle"></i>
          <small class="small-error">Error</small>
          <small class="small-success">Looks Good</small>
        </div>
        <div class="rating-form-main form-control-review-rating">
          <label class="rating-form-label" for="rating">Rating:</label>
          <input
            class="rating-form-range"
            type="range"
            min="0"
            max="5"
            name="review[rating]"
            id="rating"
          />
        </div>
        <button class="review-form-btn" id="review-submit-btn">Submit</button>
      </form>
    </div>
  </div>
</section>

<script src="/public/javascript/validateReviewForms.js"></script>
